<html>
<body>

<video id="v" autoplay> </video>

<script src="https://unpkg.com/socket.io-client@2.0.2/dist/socket.io.slim.js"></script>
<script>
var socket = io();

if(!window.MediaSource) {
  alert('MediaSource API is not available!');
  throw new Error('MediaSource API is not available!');
}

var mediaSource = new MediaSource();
var video = document.getElementById('v');
video.src = window.URL.createObjectURL(mediaSource);

var sourceBuffer = mediaSource.addSourceBuffer('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');

console.log(socket);
if(socket) {
  console.log('Library retrieved!');
}

socket.on('stream', function (data) {
  console.log(data);
  sourceBuffer.append(data);
});

</script>


</body>
</html>
